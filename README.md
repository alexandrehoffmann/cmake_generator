# cmake_generator

A little cmake generator from YAML file because I'm too lazy to write CMakeLists.txt by hand.

## Features

- üìù Generate CMakeLists.txt from simple YAML configuration
- üéØ Support for executables and libraries (static/shared)
- üì¶ Dependency management with find_package
- ‚öôÔ∏è Compiler settings (C++ standard, flags, warnings)
- üîß Installation rules
- üöÄ Easy to use CLI interface

## Installation

```bash
pip install -r requirements.txt
python setup.py install
```

Or install in development mode:

```bash
pip install -e .
```

## Quick Start

1. Create a YAML configuration file (e.g., `config.yaml`):

```yaml
project:
  name: MyProject
  version: 1.0.0
  description: My awesome project
  languages: [CXX]
  cmake_minimum: 3.15

compiler:
  cpp_standard: 17
  warnings: extra

targets:
  - name: myapp
    type: executable
    sources:
      - src/main.cpp
    dependencies:
      - Threads::Threads
```

2. Generate CMakeLists.txt:

```bash
cmake-gen config.yaml
```

This will create a `CMakeLists.txt` file in the current directory.

## Usage

### Command Line

```bash
# Generate CMakeLists.txt from config.yaml
cmake-gen config.yaml

# Specify output path
cmake-gen config.yaml -o build/CMakeLists.txt

# Show help
cmake-gen --help
```

### Python API

```python
from cmake_generator import CMakeGenerator

# Load from YAML file
generator = CMakeGenerator.from_yaml('config.yaml')

# Generate and write to file
generator.write_to_file('CMakeLists.txt')

# Or get the content as string
content = generator.generate()
print(content)
```

## Configuration Reference

### Project Configuration

```yaml
project:
  name: MyProject              # Project name (required)
  version: 1.0.0              # Project version
  description: My project      # Project description
  languages: [CXX]            # Programming languages (CXX, C, Fortran, etc.)
  cmake_minimum: 3.15         # Minimum CMake version
```

### Compiler Settings

```yaml
compiler:
  cpp_standard: 17            # C++ standard (11, 14, 17, 20, etc.)
  warnings: extra             # Enable extra warnings
  flags:                      # Additional compiler flags
    - -O3
    - -march=native
```

### Source Files

```yaml
sources:
  src_dir: src               # Source directory
  include_dir: include       # Include directory
  patterns:                  # File patterns to include
    - "*.cpp"
    - "*.hpp"
```

### Dependencies

```yaml
dependencies:
  - name: Threads            # Package name
    required: true           # Is it required?
    
  - name: Boost
    version: "1.70"          # Minimum version
    components:              # Package components
      - system
      - filesystem
```

### Targets

```yaml
targets:
  - name: myapp              # Target name
    type: executable         # Type: executable or library
    sources:                 # Source files
      - src/main.cpp
      - src/app.cpp
    dependencies:            # Link dependencies
      - Threads::Threads
      - Boost::system
    include_dirs:            # Additional include directories
      - third_party/include
    cpp_standard: 17         # Override C++ standard for this target
    
  - name: mylib
    type: library
    library_type: static     # static or shared
    sources:
      - src/lib.cpp
```

### Installation Rules

```yaml
install:
  targets:                   # Targets to install
    - myapp
    - mylib
  headers_dir: include       # Header files to install
  destination: bin           # Installation destination
```

## Example

See [example.yaml](example.yaml) for a complete example configuration.

Generated CMakeLists.txt:

```cmake
# Generated by cmake_generator

cmake_minimum_required(VERSION 3.15)

project(ExampleProject
    VERSION 1.0.0
    DESCRIPTION "An example project using cmake_generator"
    LANGUAGES CXX
)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
if(MSVC)
    add_compile_options(/W4)
else()
    add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# Dependencies
find_package(Threads)

# Source files
file(GLOB_RECURSE SOURCES "src/*.cpp")
include_directories(include)

# Target: example_app
add_executable(example_app src/main.cpp src/app.cpp)
target_link_libraries(example_app PRIVATE Threads::Threads)

# Target: example_lib
add_library(example_lib STATIC src/lib.cpp)
set_property(TARGET example_lib PROPERTY CXX_STANDARD 17)

# Installation
install(TARGETS example_app example_lib DESTINATION bin)
install(DIRECTORY include/ DESTINATION include)
```

## Testing

Run tests with:

```bash
python -m unittest tests.test_generator -v
```

## License

MIT
